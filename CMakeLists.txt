cmake_minimum_required(VERSION 3.10)
project(bp-forest C CXX)

if(DEFINED NR_TASKLETS)
else(DEFINED NR_TASKLETS)
    set(NR_TASKLETS 2)
endif(DEFINED NR_TASKLETS)
if(DEFINED NR_DPUS)
else(DEFINED NR_DPUS)
    set(NR_DPUS 10)
endif(DEFINED NR_DPUS)
if(DEFINED NUM_BPTREE_IN_CPU)
else(DEFINED NUM_BPTREE_IN_CPU)
    set(NUM_BPTREE_IN_CPU 10)
endif(DEFINED NUM_BPTREE_IN_CPU)
if(DEFINED NUM_BPTREE_IN_DPU)
else(DEFINED NUM_BPTREE_IN_DPU)
    set(NUM_BPTREE_IN_DPU 10)
endif(DEFINED NUM_BPTREE_IN_DPU)
if(DEFINED NR_DPUS_REDUNDANT)
else(DEFINED NR_DPUS_REDUNDANT)
    set(NR_DPUS_REDUNDANT 2)
endif(DEFINED NR_DPUS_REDUNDANT)
set(CYCLIC_DIST OFF)
option(CYCLIC_DIST "using cyclic distribution for DPUs" ON)

message(NR_TASKLETS=${NR_TASKLETS})
message(NR_DPUS=${NR_DPUS})
message(NUM_BPTREE_IN_CPU=${NUM_BPTREE_IN_CPU})
message(NUM_BPTREE_IN_DPU=${NUM_BPTREE_IN_DPU})
message(NR_DPUS_REDUNDANT=${NR_DPUS_REDUNDANT})
message(CYCLIC_DIST=${CYCLIC_DIST})
message(Build type:${CMAKE_BUILD_TYPE})
add_subdirectory(external)
add_subdirectory(common)
add_subdirectory(dpu)
add_subdirectory(host)
add_subdirectory(workload_gen)
